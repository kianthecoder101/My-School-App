def announce_plate(plate_norm: str, raw_text: str):
    now = now_utc()
    last = st.session_state["announced"].get(plate_norm)
    
    if last and (now - last) < timedelta(minutes=REANNOUNCE_COOLDOWN_MIN):
        return False, "recently_announced"

    # Lookup student name
    student_name = st.session_state["plate_list"].get(plate_norm, "Unknown Student")
    text = f"Attention. {student_name} is being picked up. Plate number {raw_text}."
    
    tts = generate_tts_mp3_bytes(text)
    if "error" in tts:
        return False, tts["error"]
    
    st.session_state["announced"][plate_norm] = now
    st.success(f"Matched: {student_name} ({raw_text})")
    st.audio(tts["mp3"], format="audio/mp3", autoplay=True) # Added autoplay
    return True, "ok"
